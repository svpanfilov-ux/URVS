# Техническое Задание: Система Управления Рабочим Временем Сотрудников (УРВС)

## 1. ОБЩЕЕ ОПИСАНИЕ

### 1.1 Назначение системы
Веб-приложение для управления рабочим временем сотрудников на производственных объектах компании. Система позволяет:
- Вести учет рабочего времени сотрудников
- Управлять штатным расписанием
- Отслеживать вакансии и укомплектованность
- Рассчитывать фонд оплаты труда (ФОТ)
- Формировать отчеты для бухгалтерии
- Анализировать эффективность использования трудовых ресурсов

### 1.2 Ключевые понятия
- **Объект** - производственное подразделение компании (завод, цех, участок)
- **Штатное расписание** - список должностей с указанием количества ставок, графика работы и оплаты
- **Табель** - ежемесячный учет фактически отработанного времени каждого сотрудника
- **Вакансия** - незаполненная штатная единица
- **ФОТ** - фонд оплаты труда (плановый и фактический)

---

## 2. РОЛИ ПОЛЬЗОВАТЕЛЕЙ И ПРАВА ДОСТУПА

### 2.1 Экономист по зарплате (economist)
**Полный доступ ко всем данным компании:**
- Видит все объекты, всех сотрудников, все табели
- Может редактировать штатное расписание
- Может импортировать и экспортировать данные
- Видит финансовую аналитику по всем объектам
- Формирует и отправляет отчеты
- Имеет доступ к модулю "Аналитика" с графиками и метриками

### 2.2 Менеджер объекта (manager)
**Доступ ограничен назначенным объектом:**
- Видит только сотрудников своего объекта
- Ведет табель только по своему объекту
- Видит штатное расписание своего объекта (только просмотр)
- Видит вакансии своего объекта
- Может формировать отчеты по своему объекту
- Не имеет доступа к финансовой аналитике
- При входе в систему автоматически выбирается его объект

### 2.3 Автоматический выбор объекта
- При входе менеджера система автоматически выбирает его объект
- Во всех модулях данные фильтруются по выбранному объекту
- Экономисты могут переключаться между объектами через селектор в шапке

---

## 3. МОДУЛИ СИСТЕМЫ

### 3.1 ГЛАВНАЯ СТРАНИЦА (Dashboard)

#### Для менеджеров объекта:
Отображает ключевые показатели по выбранному объекту:

**Метрики сотрудников:**
- Количество активных сотрудников
- Количество уволенных за период
- Количество подрядчиков (не зарегистрированных)
- Количество новых сотрудников за месяц

**Штатная укомплектованность:**
- Всего штатных единиц по расписанию
- Занято активными сотрудниками
- Количество вакансий
- Процент укомплектованности

**Календарь платежей:**
- Дата аванса (15-е число)
- Дата зарплаты (30-е/31-е число)
- Количество дней до следующего платежа

#### Для экономистов:
Дополнительно к вышеперечисленному:

**Графики и визуализация:**
- Столбчатая диаграмма "Плановый vs Фактический ФОТ"
- Круговая диаграмма распределения сотрудников по статусам
- Столбчатая диаграмма сравнения часов (план vs факт)

**Статистика по всей компании:**
- Общее количество сотрудников
- Общий фонд оплаты труда
- Средняя эффективность по компании

---

### 3.2 МОДУЛЬ "СОТРУДНИКИ"

#### 3.2.1 Основной функционал
Единая таблица сотрудников и вакансий:

**Отображаемые данные:**
- ФИО сотрудника (или "ВАКАНСИЯ")
- Должность
- Объект (название подразделения)
- График работы (5/2, 2/2, и т.д.)
- Тип оплаты (оклад / почасовая)
- Размер оплаты (сумма оклада или ставка в час)
- Статус (активен, уволен, подрядчик, вакансия)

**Цветовая индикация статусов:**
- Активен - зеленый бейдж
- Уволен - красный бейдж
- Подрядчик - синий бейдж
- Вакансия - желтый бейдж

#### 3.2.2 Фильтрация и поиск
- Поиск по имени сотрудника
- Фильтр по должности
- Фильтр по объекту
- Фильтр по статусу (активные, уволенные, подрядчики, вакансии)

#### 3.2.3 Управление сотрудниками
**Добавление сотрудника:**
- ФИО
- Выбор объекта
- Выбор должности из штатного расписания
- График работы (заполняется автоматически из должности)
- Тип оплаты (заполняется автоматически из должности)
- Размер оплаты (заполняется автоматически из должности)
- Статус (активен, не зарегистрирован)

**Редактирование сотрудника:**
- Изменение любых данных
- При увольнении: указание даты увольнения

**Удаление сотрудника:**
- Полное удаление записи из системы

#### 3.2.4 Импорт/Экспорт (только для экономистов)
**Импорт из CSV:**
- Массовая загрузка сотрудников
- Валидация данных при импорте
- Отображение результатов импорта

**Экспорт в CSV:**
- Выгрузка всех сотрудников
- Формат совместим с импортом

---

### 3.3 МОДУЛЬ "ШТАТНОЕ РАСПИСАНИЕ"

#### 3.3.1 Основной функционал
Таблица штатных должностей по объектам.

**Отображаемые данные:**
- Объект
- Должность
- График работы (5/2, 2/2, сменный, и т.д.)
- Тип оплаты (оклад или почасовая)
- Размер оплаты (месячный оклад или часовая ставка)
- Количество штатных единиц
- Часов в смену (обычно 8 часов)

#### 3.3.2 Права доступа
- **Экономисты**: полное редактирование
- **Менеджеры**: только просмотр своего объекта

#### 3.3.3 Редактирование (только экономисты)
**Добавление должности:**
- Выбор объекта
- Название должности
- График работы
- Тип оплаты
- Размер оплаты
- Количество ставок
- Часов в смену

**Изменение должности:**
- Inline-редактирование в таблице
- Двойной клик по ячейке для изменения
- Галочка для сохранения, крестик для отмены

**Удаление должности:**
- Удаление возможно только если на должности нет сотрудников

#### 3.3.4 Статистика
Подсчет по каждому объекту:
- Общее количество должностей
- Общее количество штатных единиц
- Суммарный плановый ФОТ

#### 3.3.5 Импорт/Экспорт (только для экономистов)
**Импорт из CSV:**
- Массовая загрузка штатного расписания
- Обновление существующих должностей

**Экспорт в CSV:**
- Выгрузка всего штатного расписания

---

### 3.4 МОДУЛЬ "ТАБЕЛЬ"

#### 3.4.1 Структура табеля
Табель разделен на **три секции**:

1. **Активные сотрудники** - постоянные работники
2. **Подрядчики** - сотрудники со статусом "не зарегистрирован"
3. **Вакансии** - незаполненные штатные единицы

Каждая секция имеет:
- Заголовок с названием секции
- Таблицу с данными
- Строку подытогов (сумма часов по секции)

#### 3.4.2 Отображение данных
**Шапка табеля:**
- Селектор месяца (по умолчанию текущий месяц)
- Календарь на весь месяц (столбец для каждого дня)
- Обозначение выходных дней (другой цвет фона)
- Сокращенные названия дней недели (Пн, Вт, Ср, и т.д.)

**Строка сотрудника/вакансии:**
- ФИО (или "ВАКАНСИЯ #N")
- Должность
- График работы
- 31 ячейка (по дню месяца)
- Столбец "Итого часов"

**Ячейка дня:**
- Может содержать количество часов (число)
- Может содержать статус (буква)
- Имеет цветовую индикацию качества работы

#### 3.4.3 Статусы и обозначения
**Буквенные коды:**
- **О** - отпуск
- **Б** - больничный
- **НН** - неявка без уважительной причины
- **У** - уволен

**Оценка качества работы (1-4):**
- 1 - низкое качество (красная ячейка)
- 2 - среднее качество (желтая ячейка)
- 3 - хорошее качество (светло-зеленая ячейка)
- 4 - отличное качество (зеленая ячейка)

#### 3.4.4 Правила ввода данных
**Ограничения по датам:**
- Будущие даты заблокированы для ввода
- Текущий месяц открыт для редактирования
- Прошлые месяцы можно редактировать

**Автоматические правила:**
- После даты увольнения автоматически ставится "У"
- Уволенные сотрудники показываются до конца месяца увольнения
- Вакансии не заполняются (серые ячейки)

#### 3.4.5 Редактирование
**Одиночная ячейка:**
- Клик по ячейке для редактирования
- Ввод числа (количество часов) или буквы (статус)
- Enter для сохранения, Esc для отмены
- Автоматическое сохранение при потере фокуса

**Контекстное меню (правая кнопка мыши на строке):**
- **Заполнить по графику** - автоматическое заполнение на месяц по графику работы (5/2, 2/2)
- **Очистить строку** - удалить все данные по сотруднику за месяц
- **Копировать из прошлого месяца** - скопировать данные из предыдущего месяца

**Массовые операции:**
- Кнопка "Заполнить всех по графику" - заполнить всех сотрудников согласно их графикам
- Кнопка "Скопировать данные из прошлого месяца" - массовое копирование

#### 3.4.6 Подсчет итогов
**По каждой секции:**
- Подытог часов по всем сотрудникам секции
- Отображается в отдельной строке под таблицей

**По каждому сотруднику:**
- Столбец "Итого" справа от календаря
- Автоматический подсчет суммы часов

**Общий подытог:**
- Сумма всех часов по табелю (все три секции)

#### 3.4.7 Визуальные индикаторы
- **Выходные дни** - серый фон столбца
- **Будущие даты** - заблокированы, темнее фон
- **Уволенные сотрудники** - серый фон строки после даты увольнения
- **Вакансии** - серые ячейки, не редактируются

---

### 3.5 МОДУЛЬ "ОТЧЕТЫ"

#### 3.5.1 Назначение
Формирование отчетов по фонду оплаты труда для бухгалтерии.

#### 3.5.2 Типы отчетов
- **Отчет по зарплате** - итоговый расчет за месяц
- **Отчет по авансу** - расчет аванса (первая половина месяца)

#### 3.5.3 Жизненный цикл отчета
**Статусы:**
1. **Черновик** - отчет создан, но не отправлен
2. **Отправлен на проверку** - отчет передан экономисту
3. **Утвержден** - отчет принят
4. **На доработке** - отчет возвращен на исправление

#### 3.5.4 Действия менеджера объекта
**Создание отчета:**
- Кнопка "Сформировать отчет"
- Выбор периода (месяц)
- Автоматический расчет на основе табеля и штатного расписания

**Содержимое отчета:**
- Название объекта
- Период
- Количество сотрудников
- Общее количество отработанных часов
- Плановый ФОТ (по штатному расписанию)
- Фактический ФОТ (по табелю)
- Отклонение (план vs факт)

**Управление отчетом:**
- **Предпросмотр** - посмотреть содержимое отчета
- **Отправить на проверку** - передать экономисту
- Редактирование (для черновиков)
- Удаление (для черновиков)

#### 3.5.5 Действия экономиста
**Просмотр всех отчетов:**
- Видит отчеты по всем объектам
- Фильтрация по статусу
- Фильтрация по объекту

**Управление отчетами:**
- **Утвердить** - принять отчет
- **Вернуть на доработку** - отправить обратно менеджеру
- **Предпросмотр** - детальный просмотр
- Экспорт в PDF/Excel (будущая функция)

---

### 3.6 МОДУЛЬ "АНАЛИТИКА" (только для экономистов)

#### 3.6.1 Общий обзор
Сводная таблица по всем объектам компании.

**Отображаемые метрики:**
- Название объекта
- Количество активных сотрудников
- Эффективность (% выполнения плановых часов)
- Плановый ФОТ
- Фактический ФОТ
- Исполнение бюджета (%)
- FTE плановый (эквивалент полной занятости)
- FTE фактический

#### 3.6.2 Визуализация данных
**График "Плановый vs Фактический ФОТ":**
- Столбчатая диаграмма
- Синие столбцы - плановый ФОТ
- Зеленые столбцы - фактический ФОТ
- По оси X - объекты компании

**График "Распределение сотрудников":**
- Круговая диаграмма
- Сегменты: активные, уволенные, подрядчики
- Процентное соотношение

**График "Сравнение часов":**
- Столбчатая диаграмма
- Синие столбцы - плановые часы
- Оранжевые столбцы - фактические часы
- По оси X - объекты компании

#### 3.6.3 Расчет метрик
**Плановый ФОТ:**
- Для окладников: количество ставок × месячный оклад
- Для почасовиков: количество ставок × норма часов в месяц × часовая ставка
- Норма часов зависит от графика работы

**Фактический ФОТ:**
- Для окладников: количество работающих × месячный оклад
- Для почасовиков: фактические часы из табеля × часовая ставка

**Эффективность:**
- (Фактические часы / Плановые часы) × 100%

**Исполнение бюджета:**
- (Фактический ФОТ / Плановый ФОТ) × 100%
- Зеленый - в пределах бюджета (до 100%)
- Красный - превышение бюджета (>100%)

---

## 4. БИЗНЕС-ЛОГИКА И ПРАВИЛА

### 4.1 Управление вакансиями
**Автоматический расчет:**
- Вакансии = Количество ставок по штатному расписанию - Количество активных сотрудников
- Вакансии показываются в модулях "Сотрудники" и "Табель"
- При заполнении вакансии (добавлении сотрудника) она автоматически исчезает

### 4.2 Графики работы
**Поддерживаемые графики:**
- **5/2** - пятидневка (пн-пт работа, сб-вс выходные)
- **2/2** - два рабочих, два выходных
- **1/3** - один рабочий, три выходных
- **Сменный** - индивидуальный график

**Расчет норм часов:**
- 5/2: примерно 168 часов в месяц (21-22 рабочих дня × 8 часов)
- 2/2: примерно 184 часа в месяц (15 смен × 12 часов)
- Другие графики: рассчитываются индивидуально

### 4.3 Статусы сотрудников
**Активен (active):**
- Постоянный работник компании
- Числится в штате
- Получает оклад или почасовую оплату

**Не зарегистрирован (not_registered):**
- Подрядчик, временный работник
- Не числится в штате официально
- Отображается в отдельной секции табеля

**Уволен (fired):**
- Уволенный сотрудник
- Показывается в табеле до конца месяца увольнения
- После даты увольнения в табеле автоматически "У"

### 4.4 Валидация данных
**При вводе часов в табель:**
- Допустимы только числа от 0 до 24
- Допустимы только буквы О, Б, НН, У

**При добавлении сотрудника:**
- Обязательные поля: ФИО, объект, должность
- Должность должна существовать в штатном расписании
- При выборе должности автоматически подтягиваются график, тип и размер оплаты

**При редактировании штатного расписания:**
- Нельзя удалить должность, на которой есть сотрудники
- Количество ставок должно быть > 0
- Размер оплаты должен быть > 0

---

## 5. ИМПОРТ И ЭКСПОРТ ДАННЫХ

### 5.1 Формат CSV
Все файлы используют стандартный CSV формат:
- Разделитель - запятая
- Кодировка - UTF-8
- Первая строка - заголовки столбцов

### 5.2 Импорт сотрудников
**Обязательные поля:**
- name (ФИО)
- objectId (ID объекта)
- position (Должность)
- status (active / not_registered / fired)

**Опциональные поля:**
- terminationDate (дата увольнения, если статус = fired)

### 5.3 Импорт штатного расписания
**Обязательные поля:**
- objectId (ID объекта)
- title (Название должности)
- workSchedule (График работы)
- paymentType (salary / hourly)
- positionsCount (Количество ставок)
- hoursPerShift (Часов в смену)

**Опциональные поля:**
- monthlySalary (если paymentType = salary)
- hourlyRate (если paymentType = hourly)

### 5.4 Экспорт
- Экспорт сохраняет тот же формат, что и импорт
- Можно экспортировать, отредактировать в Excel и импортировать обратно
- При импорте существующие записи обновляются по ID

---

## 6. ИНТЕРФЕЙС И НАВИГАЦИЯ

### 6.1 Шапка приложения
**Левая часть:**
- Логотип
- Название системы: "УРВС - Управление Рабочим Временем"

**Центр (для менеджеров и экономистов):**
- Селектор объекта
- Выпадающий список всех активных объектов

**Правая часть:**
- Имя пользователя
- Роль пользователя
- Кнопка выхода

### 6.2 Навигационное меню
**Для менеджеров:**
- Главная
- Сотрудники
- Штатное расписание (только просмотр)
- Табель
- Отчеты

**Для экономистов:**
- Главная
- Сотрудники
- Штатное расписание
- Табель
- Отчеты
- Аналитика

### 6.3 Уведомления
Система показывает всплывающие уведомления (toast) для:
- Успешных операций (зеленые)
- Ошибок (красные)
- Предупреждений (желтые)
- Информационных сообщений (синие)

---

## 7. НАЧАЛЬНЫЕ ДАННЫЕ

### 7.1 Демо-пользователи
**Экономист:**
- Логин: admin
- Пароль: admin
- Роль: economist

**Менеджер объекта ПортЭнерго:**
- Логин: manager1
- Пароль: manager1
- Роль: manager
- Объект: ПортЭнерго

**Менеджер объекта СКРУ-3:**
- Логин: manager2
- Пароль: manager2
- Роль: manager
- Объект: ОП Соликамск СКРУ-3

### 7.2 Тестовые объекты
1. **ПортЭнерго** - основной тестовый объект
2. **ОП Соликамск СКРУ-1**
3. **ОП Соликамск СКРУ-3**
4. **УПГП Урай**
5. **УПГП Белозерное**

---

## 8. ОСОБЕННОСТИ РЕАЛИЗАЦИИ

### 8.1 Автоматизация
- При входе менеджера автоматически выбирается его объект
- При выборе должности автоматически заполняются график и оплата
- Вакансии рассчитываются автоматически
- Итоги в табеле подсчитываются автоматически
- После увольнения автоматически ставится "У" в табеле

### 8.2 Валидация в реальном времени
- Проверка корректности вводимых данных
- Блокировка некорректных операций
- Понятные сообщения об ошибках

### 8.3 Адаптивность
- Приложение работает на десктопах
- Таблицы имеют горизонтальную прокрутку для больших данных
- Интерфейс адаптирован под разные разрешения экрана

### 8.4 Производительность
- Данные кэшируются на клиенте
- Автоматическое обновление после изменений
- Оптимизированная загрузка больших таблиц

---

## 9. БУДУЩИЕ УЛУЧШЕНИЯ (не реализовано)

Следующие функции НЕ включены в текущую версию:
- Экспорт отчетов в PDF/Excel
- Электронная подпись отчетов
- Email-уведомления о новых отчетах
- История изменений табеля
- Комментарии к ячейкам табеля
- Расширенная аналитика по динамике показателей
- Роль "Директор" с дополнительной аналитикой
- Роль "Групповой менеджер" для нескольких объектов
- Интеграция с системами учета времени (турникеты, биометрия)
- Мобильное приложение

---

## 10. ОСНОВНЫЕ СЦЕНАРИИ ИСПОЛЬЗОВАНИЯ

### Сценарий 1: Менеджер ведет табель
1. Менеджер входит в систему (manager1/manager1)
2. Автоматически выбирается объект "ПортЭнерго"
3. Переходит в "Табель"
4. Видит текущий месяц, три секции: активные сотрудники, подрядчики, вакансии
5. Правой кнопкой на сотруднике → "Заполнить по графику"
6. Вручную корректирует отдельные дни (больничные, отпуска)
7. Проверяет подытоги
8. Переходит в "Отчеты" → "Сформировать отчет" → "Отправить на проверку"

### Сценарий 2: Экономист проверяет отчеты
1. Экономист входит в систему (admin/admin)
2. Переходит в "Отчеты"
3. Видит отчет от менеджера со статусом "Отправлен на проверку"
4. Нажимает "Предпросмотр"
5. Проверяет расчеты
6. Нажимает "Утвердить" или "Вернуть на доработку"

### Сценарий 3: Экономист анализирует эффективность
1. Экономист переходит в "Аналитика"
2. Видит таблицу по всем объектам
3. Анализирует графики ФОТ
4. Выявляет объекты с перерасходом бюджета
5. Проверяет эффективность использования рабочего времени

### Сценарий 4: Добавление нового сотрудника
1. Переход в "Сотрудники"
2. Нажатие "Добавить сотрудника"
3. Заполнение: ФИО, объект, должность
4. Автоматическое заполнение графика и оплаты из должности
5. Сохранение
6. Вакансия автоматически уменьшается на 1

### Сценарий 5: Увольнение сотрудника
1. Переход в "Сотрудники"
2. Клик "Редактировать" на сотруднике
3. Изменение статуса на "Уволен"
4. Указание даты увольнения
5. Сохранение
6. В табеле после даты увольнения автоматически "У"
7. Вакансия автоматически увеличивается на 1

---

**Конец документа**
